{% extends 'base.html' %} {% block title %}ê´€ë¦¬ì ëŒ€ì‹œë³´ë“œ{% endblock %} {%
block content %}

<div class="container">
  <h1>ğŸ›¡ ê´€ë¦¬ì ëŒ€ì‹œë³´ë“œ</h1>

  <!-- ğŸ’¤ íœ´ë©´ ìë™ ì²˜ë¦¬ ë²„íŠ¼ -->
  <form method="POST" action="{{ url_for('check_dormant_users') }}">
    <button
      class="btn"
      onclick="return confirm('ì‹ ê³  ëˆ„ì  ìœ ì €ë“¤ì„ íœ´ë©´ ì²˜ë¦¬í• ê¹Œìš”?')"
    >
      ğŸ’¤ ì‹ ê³  ëˆ„ì  ìœ ì € íœ´ë©´ì²˜ë¦¬
    </button>
  </form>

  <!-- ğŸ‘¥ ì‚¬ìš©ì ëª©ë¡ -->
  <h2>ğŸ‘¥ ì‚¬ìš©ì ëª©ë¡</h2>
  <table class="styled-table">
    <thead>
      <tr>
        <th>ID</th>
        <th>ì´ë¦„</th>
        <th>ê´€ë¦¬ì</th>
        <th>íœ´ë©´</th>
        <th>ê´€ë¦¬</th>
      </tr>
    </thead>
    <tbody>
      {% for u in users %}
      <tr>
        <td>{{ u.id }}</td>
        <td>{{ u.username }}</td>
        <td>{{ 'âœ…' if u.is_admin else 'âŒ' }}</td>
        <td>{{ 'ğŸ›Œ' if u.is_dormant else 'ğŸŒ í™œì„±' }}</td>
        <td>
          {% if not u.is_admin %}
          <!-- ğŸ—‘ ì‚­ì œ -->
          <form
            method="POST"
            action="{{ url_for('delete_user', user_id=u.id) }}"
            style="display: inline"
          >
            <button
              class="btn"
              onclick="return confirm('ì •ë§ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?')"
            >
              ğŸ—‘ ì‚­ì œ
            </button>
          </form>

          {% if not u.is_dormant %}
          <!-- ğŸ›Œ íœ´ë©´ ì²˜ë¦¬ -->
          <form
            method="POST"
            action="{{ url_for('mark_user_dormant', user_id=u.id) }}"
            style="display: inline"
          >
            <button
              class="btn"
              onclick="return confirm('íœ´ë©´ ì²˜ë¦¬í•˜ì‹œê² ìŠµë‹ˆê¹Œ?')"
            >
              ğŸ›Œ íœ´ë©´
            </button>
          </form>
          {% else %}
          <!-- ğŸ”“ íœ´ë©´ í•´ì œ -->
          <form
            method="POST"
            action="{{ url_for('unmark_user_dormant', user_id=u.id) }}"
            style="display: inline"
          >
            <button
              class="btn"
              onclick="return confirm('íœ´ë©´ì„ í•´ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?')"
            >
              ğŸ”“ í•´ì œ
            </button>
          </form>
          {% endif %} {% endif %}
        </td>
      </tr>
      {% endfor %}
    </tbody>
  </table>

  <!-- ğŸ“¦ ìƒí’ˆ ëª©ë¡ -->
  <h2>ğŸ“¦ ìƒí’ˆ ëª©ë¡</h2>
  <ul>
    {% for p in products %}
    <li>ID: {{ p.id }} | ì´ë¦„: {{ p.name }} | íŒë§¤ì ID: {{ p.seller_id }}</li>
    {% endfor %}
  </ul>

  <!-- ğŸ’° ìµœê·¼ ê±°ë˜ ë‚´ì—­ -->
  <h2>ğŸ’° ìµœê·¼ ê±°ë˜ ë‚´ì—­ (10ê±´)</h2>
  <ul>
    {% for t in transactions %}
    <li>{{ t.sender_id }} â†’ {{ t.receiver_id }}: {{ t.amount }}P</li>
    {% else %}
    <li>ê±°ë˜ ë‚´ì—­ ì—†ìŒ</li>
    {% endfor %}
  </ul>

  <!-- ê¸°íƒ€ ë§í¬ -->
  <a href="{{ url_for('all_transactions') }}" class="btn"
    >ğŸ“œ ì „ì²´ ê±°ë˜ ë‚´ì—­ ë³´ê¸°</a
  >
  <br /><br />
  <a href="{{ url_for('index') }}" class="btn">â† ë©”ì¸ìœ¼ë¡œ</a>
</div>

{% endblock %}
